services:
  nginx:
    image: nginx:latest
    container_name: nginx-proxy
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf:ro
      - ./conf.d:/etc/nginx/conf.d
      - /etc/letsencrypt:/etc/letsencrypt:ro  # 인증서 디렉토리를 마운트
      - /var/www/certbot:/var/www/certbot:ro  # certbot 웹 루트 디렉토리도 마운트
    networks:
      - nginx-network
    restart: always

networks:
  nginx-network:
    external: true